<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Segregator: segregator - ENPM808X FINAL PROJECT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Segregator
   </div>
   <div id="projectbrief">This is the Final project for the course ENPM808X. We have created a robot called Segregator that picks and places colored objects based on the input given by the user</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">segregator - ENPM808X FINAL PROJECT </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/sbrahma0/segregator"></a> <a href="https://coveralls.io/github/kamakshijain/segregator?branch=master"></a> </p><h2><a href="https://opensource.org/licenses/BSD-3-Clause"></a> </h2>
<h1>Overview</h1>
<p>In today’s fast-paced production environments, picking and packing operations demand uninterrupted speed, reliability, inspection, sorting, accuracy and dexterity from human operator. To increase productivity and ease of implementation, we will be developing software for a Kuka robotic manipulator that can segregate different colored packages and place them on preassigned belts/cases. This will not only lower costs versus manual labor, but also saves valuable production time for Acme Robotics. We will be defining the zeroth configuration of the Kuka robot. An overhead camera will detect the color of the package that can be modified by the user. Local coordinate of the object will be published w.r.t the manipulator’s location. Eventually the vacuum gripper of the manipulator will be brought to the object location through an optimal trajectory, dodging obstacles (static) if any. The gripper will be activated to pick and place the object in the desired station. Category - “Material handling robot”.</p>
<h2>Demonstration</h2>
<h2>Video File</h2>
<p>The video to the project Demonstration can be found using the following links: <br />
 For the Red and Blue configuration: <a href="https://drive.google.com/open?id=1-ZEGL8EZApvfI70jUEOpr-Fli41xDrfM">RB world</a> <br />
 For the Yellow Green configuration: <a href="https://drive.google.com/open?id=1ZiCZVlUQzcZHYuTLBjwb5nXxRo2_XhzU">YG world</a></p>
<h2>About the authors</h2>
<p>Here is a little information about the authors:</p>
<ul>
<li>Kamakshi Jain</li>
<li>Sayan Brahma</li>
<li>Chinmay Joshi <br />
 I am a graduate student doing my Master's in Robotics at the University of Maryland. My Bachelor's degree was in Electronics and Instrumentation Engineering from Vellore Institute of Technology, India. I would like to work in the field of Robotics with a focus on either Computer Vision or Machine Learning.</li>
</ul>
<h3>Technologies to be used:</h3>
<ul>
<li>Ubuntu 16.04</li>
<li>ROS Kinetic</li>
<li>OpenCV</li>
<li>Gazebo for simulation</li>
<li>Kuka Manipulator Model, vacuum gripper model, camera module</li>
</ul>
<h2>AIP Logs</h2>
<p><a href="https://docs.google.com/spreadsheets/d/1l3zZY-S-sCEj8x_SvJREo7-diR4zwI-w_J22i3sZJyI/edit?usp=sharing">AIP Spreadsheet</a>- This contains our product backlog, iteration backlog, and work log. </p><h2>Sprint doc</h2>
<p><a href="https://docs.google.com/document/d/1x5kZCbR9iNZZeu6fHsHf5Rvu3TCuqFMhLQ0rkCWsUQ4/edit?usp=sharing">Sprint Planing</a> - This contains the google doc with sprint plans and problems faced.</p>
<h2>LICENSE</h2>
<p>### Copyright &lt;2019&gt; &lt;Kamakshi jain&gt;=""&gt; &lt;Sayan brahma&gt;=""&gt; &lt;Chinmay joshi&gt;=""&gt; </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</div></div><!-- fragment --> <h2>Dependencies</h2>
<ul>
<li>To install ROS Kinetic in Ubuntu 16.04, follow the steps in this <a href="http://wiki.ros.org/kinetic/Installation/Ubuntu">link</a>.</li>
<li>To install catkin, follow the installation steps in this <a href="http://wiki.ros.org/catkin">link</a>.</li>
</ul>
<h3>Ros Control Dependencies (REQUIRED)</h3>
<p>Make sure you have these packages installed in the environment:</p>
<ul>
<li>ros-kinetic-velocity-controllers</li>
<li>ros-kinetic-ros-control</li>
<li>ros-kinetic-position-controllers</li>
<li>ros-kinetic-joint-state-controller</li>
<li>ros-kinetic-joint-trajectory-controller</li>
<li>ros-kinetic-gazebo-ros-control</li>
</ul>
<p>If not installed, type:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo apt-get install ros-kinetic-velocity-controllers ros-kinetic-ros-control</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;sudo apt-get install ros-kinetic-position-controllers ros-kinetic-joint-state-controller</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;sudo apt-get install ros-kinetic-joint-trajectory-controller ros-kinetic-moveit</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;sudo apt install ros-kinetic-gazebo-ros-control</div></div><!-- fragment --><h2>Build Instructions</h2>
<p>To build this code in a catkin workspace: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/catkin_ws/</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;catkin_make</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;source devel/setup.bash</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;cd src/</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;git clone https://github.com/kamakshijain/segregator.git</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;cd ..</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;catkin_make</div></div><!-- fragment --><p> Note, that if you do not have a catkin workspace, then to build this code use the following commands: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;mkdir -p ~/catkin_ws/src</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;cd ~/catkin_ws/</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;catkin_make</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;source devel/setup.bash</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;cd src/</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;git clone https://github.com/kamakshijain/segregator.git</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;cd ..</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;catkin_make</div></div><!-- fragment --> <h3>Installation of additional packages</h3>
<p>In your catkin workspace directory (or create a new one using the above instructions) </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;git clone https://github.com/kamakshijain/iiwa_stack.git</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;cd ..</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;catkin_make</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;source devel/setup.bash</div></div><!-- fragment --> <h2>Running the Demo using Launch File</h2>
<p>To run the demo, a launch file has been created. This launch file loads the Gazebo environment and runs the cam node to detect the objects on the table and segregate them into bins based on their color.</p>
<p>After following the build instructions, to run the demo, launch the code using the following commands: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/catkin_ws/</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;source devel/setup.bash</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;roslaunch segregator segregator.launch</div></div><!-- fragment --><p>To be in line with the need of the project we have added various user inputs which basically gives different color slabs for the robot to pick and place. Various user inputs can be launched using the following commands: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;roslaunch segregator segregator.launch Color:=BB</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;roslaunch segregator segregator.launch Color:=BR</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;roslaunch segregator segregator.launch Color:=GB</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;roslaunch segregator segregator.launch Color:=RB</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;roslaunch segregator segregator.launch Color:=RG</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;roslaunch segregator segregator.launch Color:=RR</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;roslaunch segregator segregator.launch Color:=YG</div></div><!-- fragment --> <h2>Record Bag File</h2>
<p>A ROS bag file is used to record all the topic and messages being published in the terminal. After following the build instructions, run the following commands to record the bag file:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/catkin_ws/</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;source devel/setup.bash</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;roslaunch segregator segregator.launch record:=enable</div></div><!-- fragment --><p>The bag file can be found in the results folder as that is its default storing location.</p>
<p><b>Inspecting the bag file</b> <br />
 To get information on the generated bag file, run the following:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/catkin_ws/src/segregator/results/</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;rosbag info kuka.bag</div></div><!-- fragment --><p><b>Playing the bag file</b> <br />
 To play the bag file, ROS master has to be running. In a new terminal type the following: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;roscore</div></div><!-- fragment --><p> In a new terminal, run the following command: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/catkin_ws/src/segregator/results/</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;rosbag play kuka.bag</div></div><!-- fragment --><p><b>Playing the bag file to Observe motion</b> <br />
 As stated above, you can simply play the bag file. But, to get a better understanding of what is actually happening you might need to see the motion being generated by the robot. To do so, follow the steps below. After following the build instructions, launch the Gazebo world by running the following commands: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;source ~/catkin_ws/devel/setup.bash</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;roslaunch iiwa_moveit moveit_planning_execution.launch</div></div><!-- fragment --><p>To only run Gazebo, and not Rviz, run </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;source ~/catkin_ws/devel/setup.bash</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;roslaunch iiwa_moveit moveit_planning_execution.launch rviz:=false</div></div><!-- fragment --><p>Now once the above steps are done, in a new terminal type the following </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/catkin_ws/src/segregator/results/</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;rosbag play kuka.bag</div></div><!-- fragment --><h2>Run Tests</h2>
<h3>1. Run the test cases while compiling</h3>
<p>Open a new terminal and give the following commands </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;catkin_make run_tests_segregator</div></div><!-- fragment --><h3>2. Run the test cases using test node</h3>
<p>Open a new terminal and give the following commands </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;source ~/catkin_ws/devel/setup.bash</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;roslaunch iiwa_moveit moveit_planning_execution.launch</div></div><!-- fragment --><p> Open a new terminal </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;source ~/catkin_ws/devel/setup.bash</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;rosrun segregator allTests</div></div><!-- fragment --><h2>Code Coverage</h2>
<div class="image">
<img src="https://img.shields.io/badge/coverage-94.1%25-green.svg"  alt="Code coverage"/>
</div>
<p> <br />
</p>
<p>(NOTE: Do not mistake this tag with the tag generated by coveralls.)</p>
<p>We have been facing issues to get coveralls to pick the repository from Travis. We have been trying for 3 days but somehow coveralls isn't able to check for code coverage even though the project is building on Travis.</p>
<p>To run code coverage locally follow the steps given below:</p>
<ul>
<li>First you need to install the following package <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo apt-get install lcov</div></div><!-- fragment --></li>
<li>After installing please open a new terminal and give the following commands <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;source ~/catkin_ws/devel/setup.bash</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;roslaunch iiwa_moveit moveit_planning_execution.launch</div></div><!-- fragment --></li>
<li>Open a new terminal and give the following commands <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;catkin_make code_coverage</div></div><!-- fragment --></li>
<li>To see the code coverage please give the following commands <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/catkin_ws/build/coverage/</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;firefox index.html</div></div><!-- fragment --></li>
</ul>
<p>We have attached a few screenshots of the code coverage that was locally built on our system it can be found under extra files section in the repository.</p>
<h2>Error checks</h2>
<p><b>cppcheck</b> <br />
 To run cppcheck in Terminal, run the following commands: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd &lt;path to repository&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;cppcheck --std=c++11 -I include/ --suppress=missingIncludeSystem $(find . -name \*.cpp -or -name \*.hpp | grep -vE -e &quot;^./docs/&quot; -e &quot;^./launch/&quot; -e &quot;^./results/&quot; -e &quot;^./UML/&quot; -e &quot;./world/&quot;)</div></div><!-- fragment --><p><b>cpplint</b> <br />
 To check Google C++ Style formatting in Terminal, run the following commands: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd &lt;path to repository&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;cpplint $(find . -name \*.cpp -or -name \*.hpp | grep -vE -e &quot;^./docs/&quot; -e &quot;^./launch/&quot; -e &quot;^./results/&quot; -e &quot;^./UML/&quot; -e &quot;./world/&quot;)</div></div><!-- fragment --><h2>Known Issues/Bugs</h2>
<p>The code coverage is not being generated by coveralls. We have been at it for three days, but could not figure out why the code coverage is not being generated. The code coverage is running locally but Travis doesn't seem to pick it up. One possible reason is that the world files have to run through the iiwa_stack repository and we believe that coveralls is having trouble picking that up. We even tried to include the repository in our repository but it still didn't work.</p>
<h2>Generating Doxygen Documentation</h2>
<p>To install doxygen run the following command: ``` sudo apt install doxygen ```` Now, to generate doxygen documentation, run the following commands: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/catkin_ws/src/segregator/</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;doxygen doxconfig</div></div><!-- fragment --><p> Doxygen files will be generated to /docs folder. To view them in a browser, run the following commands: ``` cd docs/html firefox index.html `` </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
